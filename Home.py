import streamlit as st
import pandas as pd
from datetime import date

# Configure the page
st.set_page_config(
   page_title="CM",
   page_icon="üìÑ",
   layout="centered",
   initial_sidebar_state="collapsed",
)


def check_password():
    """Returns `True` if the user had the correct password."""

    def password_entered():
        """Checks whether a password entered by the user is correct."""
        if st.session_state["password"] == st.secrets["passwords"]["test_user"]:
            st.session_state["password_correct"] = True
            del st.session_state["password"]  # don't store password
        else:
            st.session_state["password_correct"] = False

    if "password_correct" not in st.session_state:
        # First run, show input for password.
        st.text_input(
            "Password", type="password", on_change=password_entered, key="password"
        )
        return False
    elif not st.session_state["password_correct"]:
        # Password not correct, show input + error.
        st.text_input(
            "Password", type="password", on_change=password_entered, key="password"
        )
        st.error("üòï Password incorrect")
        return False
    else:
        # Password correct.
        return True

if check_password():

   st.subheader("–§–æ—Ä–º—É–≤–∞–Ω–Ω—è –¥–æ–≥–æ–≤–æ—Ä—É")
   cat_col, type_col = st.columns([1,0.5])
   with cat_col:
      select_cat = st.selectbox(
         "–û–±—Ä–∞—Ç–∏ –≤–∏–¥ –¥–æ–≥–æ–≤–æ—Ä—É", 
         ["–î–æ–≥–æ–≤—ñ—Ä –Ω–∞ –ø–æ—Å–ª—É–≥–∏ –∑ —Ä–µ–º–æ–Ω—Ç—É —Ç–µ–ø–ª–æ–≤–æ–∑—É", 
         "–î–æ–≥–æ–≤—ñ—Ä –æ—Ä–µ–Ω–¥–∏", "–î–æ–≥–æ–≤—ñ—Ä –Ω–∞–¥–∞–Ω–Ω—è –ø–æ—Å–ª—É–≥"]) 
   with type_col:
      select_type = st.radio('', ['–í–∏—Ç—Ä–∞—Ç–Ω–∏–π', '–ü—Ä–∏–±—É—Ç–∫–æ–≤–∏–π'], horizontal=True)

   st.write("""–Ü—Å–Ω—É—î —Ç–∏–ø–æ–≤–∏–π –¥–æ–≥–æ–≤—ñ—Ä –æ–±—Ä–∞–Ω–æ–≥–æ –≤–∏–¥—É""") 

   # User Inputs
   with st.expander("–ó–∞–∑–Ω–∞—á—Ç–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –¥–æ–≥–æ–≤–æ—Ä—É"):
      if select_cat == "–î–æ–≥–æ–≤—ñ—Ä –Ω–∞ –ø–æ—Å–ª—É–≥–∏ –∑ —Ä–µ–º–æ–Ω—Ç—É —Ç–µ–ø–ª–æ–≤–æ–∑—É":
         in1_col, in2_col = st.columns(2)
         with in1_col:
            input1 = st.selectbox("–û–±—Å—è–≥ —Ä–µ–º–æ–Ω—Ç—É", ["–ü–†-1", "–ü–†-2"])
         with in2_col:
            input2 = st.selectbox("–û–±—Å—è–≥ –¢–û", ["–¢–û-3", "–¢–û-4"])

         in3_col, in4_col = st.columns(2)
         with in3_col:
            input3 = st.selectbox("–ú—ñ—Å—Ç–æ —É–∫–ª–∞–¥–∞–Ω–Ω—è –¥–æ–≥–æ–≤–æ—Ä—É", 
            ["–ö–∏—ó–≤", "–õ—å–≤—ñ–≤", "–•–∞—Ä–∫—ñ–≤", "–î–Ω—ñ–ø—Ä–æ", "–û–¥–µ—Å–∞", "–õ–∏–º–∞–Ω"])
         with in4_col:
            current_date = date.today()
            input4 = st.date_input("–î–∞—Ç–∞ —É–∫–ª–∞–¥–∞–Ω–Ω—è –¥–æ–≥–æ–≤–æ—Ä—É", min_value=current_date)

         st.caption("–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —â–æ–¥–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞")
         in5_col, in6_col = st.columns(2)
         with in5_col:
            input5 = st.text_input("–ö–æ–¥ –Ñ–î–†–ü–û–£ –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞*", '38560924')
            st.caption("*—Å–ø—Ä–æ–±—É–π 38560924 –∞–±–æ 40297125")
         with in6_col:
            edr = {'38560924' : { 
               'title' : '–¢–æ–≤–∞—Ä–∏—Å—Ç–≤–æ –∑ –æ–±–º–µ–∂–µ–Ω–æ—é –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—é "–ü–æ–ª—Ç–∞–≤—Å—å–∫–∏–π —Ç–µ–ø–ª–æ–≤–æ–∑–æ—Ä–µ–º–æ–Ω—Ç–Ω–∏–π –∑–∞–≤–æ–¥"',
               'rep' : "–í–∞—Å–∏–ª–µ–Ω–∫–æ –í–∞—Å–∏–ª–∏–Ω–∞ –í–∞—Å–∏–ª—ñ–≤–Ω–∞" 
            },
            '40297125' : {
               'title' : '–¢–æ–≤–∞—Ä–∏—Å—Ç–≤–æ –∑ –æ–±–º–µ–∂–µ–Ω–æ—é –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—é "–ó–∞–ø–æ—Ä—ñ–∑—å–∫—ñ–π —Ç–µ–ø–ª–æ–≤–æ–∑–æ—Ä–µ–º–æ–Ω—Ç–Ω–∏–π –∑–∞–≤–æ–¥"',
               'rep' : '–ü–µ—Ç—Ä–µ–Ω–∫–æ –ü–µ—Ç—Ä–æ –ü–µ—Ç—Ä–æ–≤–∏—á'
            }}
            st.write("")
            input6 = edr.get(input5).get('title')
            input7 = edr.get(input5).get('rep')
            st.caption(input6)
         
         in8_col, in9_col = st.columns(2)
         with in8_col:
            input8 = st.text_input("–ù–æ–º–µ—Ä –¥–æ–≤—ñ—Ä–µ–Ω–æ—Å—Ç—ñ")
         with in9_col:
            input9 = st.date_input("–î–∞—Ç–∞ –≤–∏–¥–∞—á—ñ –¥–æ–≤—ñ—Ä–µ–Ω–æ—Å—Ç—ñ")

         st.caption("–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —â–æ–¥–æ –ø—Ä–µ–¥–º–µ—Ç—É –¥–æ–≥–æ–≤–æ—Ä—É")
         in10_col, in11_col = st.columns(2)
         with in10_col:
            input10 = st.text_input("–°–µ—Ä—ñ—è", "–ß–ú–ï–ó")
         with in11_col:
            input11 = st.text_input("–ù–æ–º–µ—Ä", "302")

         in12_col, in13_col = st.columns(2)
         with in12_col:
            input12 = st.number_input("–í–∞—Ä—Ç—ñ—Å—Ç—å –¥–æ–≥–æ–≤–æ—Ä—É (–≥—Ä–Ω), –∑ –ü–î–í")
         with in13_col:
            input13 = st.text_input("–ù–æ–º–µ—Ä", "302")


         
         
         


   chapters = [
      "–ü—Ä–µ–∞–º–±—É–ª–∞", "1. –ü—Ä–µ–¥–º–µ—Ç –¥–æ–≥–æ–≤–æ—Ä—É", "2. –í–∞—Ä—Ç—ñ—Å—Ç—å –ø–æ—Å–ª—É–≥ —ñ —É–º–æ–≤–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É",
   "3. –£–º–æ–≤–∏ —Ç–∞ –º—ñ—Å—Ü–µ –Ω–∞–¥–∞–Ω–∏—Ö –ø–æ—Å–ª—É–≥", "4. –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–π–º–∞–Ω–Ω—è-–ø–µ—Ä–µ–¥–∞—á—ñ –Ω–∞–¥–∞–Ω–∏—Ö –ø–æ—Å–ª—É–≥", 
   "5. –û–±—Å—Ç–∞–≤–∏–Ω–∏ –Ω–µ–ø–µ—Ä–µ–±–æ—Ä–Ω–æ—ó —Å–∏–ª–∏", "6. –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å —Å—Ç–æ—Ä—ñ–Ω", 
   "7. –ê–Ω—Ç–∏–∫–æ—Ä—É–ø—Ü—ñ–π–Ω–µ –∑–∞—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è", "8. –ü–æ—Ä—è–¥–æ–∫ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è —Å–ø–æ—Ä—ñ–≤", 
   "9. –ó–∞—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–æ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å", "10. –Ü–Ω—à—ñ —É–º–æ–≤–∏ –¥–æ–≥–æ–≤–æ—Ä—É",
   "11. –¢–µ—Ä–º—ñ–Ω –¥—ñ—ó –î–æ–≥–æ–≤–æ—Ä—É", "12. –î–æ–¥–∞—Ç–∫–∏ –¥–æ –¥–æ–≥–æ–≤–æ—Ä—É", 
   "13. –Æ—Ä–∏–¥–∏—á–Ω—ñ –∞–¥—Ä–µ—Å–∏ —Ç–∞ –±–∞–Ω–∫—ñ–≤—Å—å–∫—ñ —Ä–µ–∫–≤—ñ–∑–∏—Ç–∏ –°—Ç–æ—Ä—ñ–Ω"]

   # Add empty line for better readibility
   st.write("")

   col1, col2, col3 = st.columns(3)
   with col2:
      st.subheader("–î–û–ì–û–í–Ü–† ‚Ññ")
   st.write(f"""–Ω–∞ –Ω–∞–¥–∞–Ω–Ω—è –ø–æ—Å–ª—É–≥ –∑ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Ä–µ–º–æ–Ω—Ç—É –≤ –æ–±—Å—è–∑—ñ 
   {input1} —Ç–∞ —Ç–µ—Ö–Ω—ñ—á–Ω–æ–≥–æ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –≤ –æ–±—Å—è–∑—ñ {input2}""")

   col1, col2 = st.columns([1,0.2])
   with col1:
      st.caption(f"–º. {input3}")
   with col2:
      st.caption(input4)

   with st.expander("–ü—Ä–µ–∞–º–±—É–ª–∞"):
      st.caption("""–ê–∫—Ü—ñ–æ–Ω–µ—Ä–Ω–µ —Ç–æ–≤–∞—Ä–∏—Å—Ç–≤–æ ¬´–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –∑–∞–ª—ñ–∑–Ω–∏—Ü—è¬ª, –¥–∞–ª—ñ ‚Äì –í–∏–∫–æ–Ω–∞–≤–µ—Ü—å, 
      –≤ –æ—Å–æ–±—ñ –∞–∫—Ü—ñ–æ–Ω–µ—Ä–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∏—Å—Ç–≤–∞ ¬´–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –∑–∞–ª—ñ–∑–Ω–∏—Ü—è¬ª, –∑ –æ–¥–Ω—ñ—î—ó —Å—Ç–æ—Ä–æ–Ω–∏, —Ç–∞""")
      st.caption(f"""{input6}, –¥–∞–ª—ñ ‚Äì –ó–∞–º–æ–≤–Ω–∏–∫, –≤ –æ—Å–æ–±—ñ {input7}, —è–∫–∞(–∏–π) –¥—ñ—î –Ω–∞ –ø—ñ–¥—Å—Ç–∞–≤—ñ 
      –¥–æ–≤—ñ—Ä–µ–Ω–æ—Å—Ç—ñ ‚Ññ {input8} –≤—ñ–¥ {input9} —Ä., –∑ —ñ–Ω—à–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏, –ø—Ä–∏  —Å–ø—ñ–ª—å–Ω–æ–º—É 
      –∑–≥–∞–¥—É–≤–∞–Ω–Ω—ñ ‚Äì –°—Ç–æ—Ä–æ–Ω–∏, —É–∫–ª–∞–ª–∏ —Ü–µ–π –î–æ–≥–æ–≤—ñ—Ä –ø—Ä–æ –Ω–∞—Å—Ç—É–ø–Ω–µ.""")

   with st.expander("1. –ü—Ä–µ–¥–º–µ—Ç –¥–æ–≥–æ–≤–æ—Ä—É"):
      st.caption(f"""1.1. –í–∏–∫–æ–Ω–∞–≤–µ—Ü—å –∑–æ–±–æ–≤‚Äô—è–∑—É—î—Ç—å—Å—è –Ω–∞–¥–∞—Ç–∏ –ø–æ—Å–ª—É–≥–∏ –∑ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Ä–µ–º–æ–Ω—Ç—É 
      –≤ –æ–±—Å—è–∑—ñ {input1} —Ç–∞ —Ç–µ—Ö–Ω—ñ—á–Ω–æ–≥–æ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –≤ –æ–±—Å—è–∑—ñ {input2} —Ç–µ–ø–ª–æ–≤–æ–∑–∞ —Å–µ—Ä—ñ—ó {input10} ‚Ññ {input11} 
      –≤–ª–∞—Å–Ω–æ—Å—Ç—ñ –ó–∞–º–æ–≤–Ω–∏–∫–∞ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ —Ç–∞ –∑–∞–ø–∞—Å–Ω–∏—Ö —á–∞—Å—Ç–∏–Ω –ó–∞–º–æ–≤–Ω–∏–∫–∞ 
      (–¥–∞–ª—ñ {input1}, {input2} –∞–±–æ –ø–æ—Å–ª—É–≥–∏), –∞ –ó–∞–º–æ–≤–Ω–∏–∫ –ø—Ä–æ–≤–µ—Å—Ç–∏ –æ–ø–ª–∞—Ç—É –≤–∞—Ä—Ç–æ—Å—Ç—ñ –ø–æ—Å–ª—É–≥ 
      –∑–≥—ñ–¥–Ω–æ –∑ —É–º–æ–≤–∞–º–∏ —Ü—å–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä—É.""")
      st.caption(f"""1.2. –ó–∞ –¥–∞–Ω–∏–º –¥–æ–≥–æ–≤–æ—Ä–æ–º –í–∏–∫–æ–Ω–∞–≤–µ—Ü—å –ø—Ä–æ—Ç—è–≥–æ–º –π–æ–≥–æ –¥—ñ—ó –ø—Ä–æ–≤–æ–¥–∏—Ç—å 
      {input1} —Ç–∞ {input2} –æ–¥–∏–Ω —Ä–∞–∑ –∑–≥—ñ–¥–Ω–æ –≥—Ä–∞—Ñ—ñ–∫–∞ (–î–æ–¥–∞—Ç–æ–∫ 1).""")

   with st.expander("2. –í–∞—Ä—Ç—ñ—Å—Ç—å –ø–æ—Å–ª—É–≥ —ñ —É–º–æ–≤–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É"):
      st.caption(f"""2.1. –í–∞—Ä—Ç—ñ—Å—Ç—å –ø–æ—Å–ª—É–≥ –∑–∞ –¥–æ–≥–æ–≤–æ—Ä–æ–º –≤–∏–∑–Ω–∞—á–µ–Ω–∞ —É –ü—Ä–æ—Ç–æ–∫–æ–ª—ñ –ø–æ–≥–æ–¥–∂–µ–Ω–Ω—è –≤–∞—Ä—Ç–æ—Å—Ç—ñ 
      –ø–æ—Å–ª—É–≥ (–î–æ–¥–∞—Ç–æ–∫ ‚Ññ 2), —è–∫–∏–π —î –Ω–µ–≤—ñ–¥‚Äô—î–º–Ω–æ—é —á–∞—Å—Ç–∏–Ω–æ—é –¥–∞–Ω–æ–≥–æ –î–æ–≥–æ–≤–æ—Ä—É.""")
      st.caption(f"""2.2. –ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å –¥–æ–≥–æ–≤–æ—Ä—É —Å–∫–ª–∞–¥–∞—î {input12} –≥—Ä–Ω.  
      –≤ —Ç.—á. –ü–î–í 20% - {input12*0.20} –≥—Ä–Ω.""")







   
   for chapter in chapters[3:]:
      with st.expander(chapter):
         st.write("Some text")
